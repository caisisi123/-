"use strict";(self.webpackChunkmake_project=self.webpackChunkmake_project||[]).push([[169],{1920:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var l=a(6252),i=a(3577),n=a(2262);const o=a.p+"images/65f58a429797bee37e2d.webp";var s=a(2533);const r=(0,s.DS)(),u=["紧急不重要","重要且紧急","不重要不紧急","重要不紧急"],d=[];let c=Array(4).fill(0);c.map(((e,t)=>{c[t]={name:u[t],value:0}}));const f=(()=>{const e=[0,0,0,0];return r.todayData.forEach((t=>{e[t.type]++})),c.forEach(((t,a)=>{e[a]>0&&(t.value=e[a])})),c=c.filter((e=>{if(e.value>0)return d.push(e.name),!0})),c})();r.$onAction((e=>{"pushStore"===e.name&&(0,l.Y3)((()=>{const t=e.args[0].type;f[t]||(f[t]={name:u[t],value:0},d.push(u[t])),f[t].value++,v.setOption({series:[{name:"count",data:f}],legend:[{data:d,id:1}]})}))}));const m=[],p=[];r.todayData.forEach((e=>{e.focusTime>0&&(p.push({name:e.description,value:e.focusTime}),m.push(e.description))})),r.$onAction((e=>{"updateStoreTime"===e.name&&(0,l.Y3)((()=>{const t=e.args[0].value,a=p.findIndex((e=>e.name===t.description));-1===a?(p.push({name:t.description,value:t.focusTime+e.args[1]}),m.push(t.description)):p[a].value+=e.args[1],v.setOption({series:[{name:"focus",data:p}],legend:[{data:m,id:2}]})}))}));let v=null;var h=a(5781),g=a(3941);const y=(0,s.DS)();console.log(y.todayData);let w=(0,n.iH)(0),_=(0,n.iH)(0);console.log("statistic",y.todayData),y.todayData.length&&y.todayData.forEach((e=>{e.focusTime>0&&(_.value+=e.focusTime,w.value+=e.focusTimes)}));let S=(0,n.iH)(0),W=(0,n.iH)(0),b=(0,n.iH)(0);indexedDB.open("PlanDB",5).onsuccess=function(e){e.target.result.transaction("record","readonly").objectStore("record").getAll().onsuccess=function(e){const t=e.target.result;if(!t.length)return;const a=new Set;t.forEach((e=>{e.focusTime&&(S.value+=e.focusTimes,W.value+=e.focusTime,a.add(e.date))})),b.value=a.size}},y.$onAction((e=>{"updateStoreTime"===e.name&&(0,l.Y3)((()=>{_.value+=e.args[1],w.value+=1,S.value+=1,W.value+=e.args[1],localStorage.getItem(g.V)||(b.value+=1,localStorage.setItem(g.V,`${b.value}`))}))}));const k=e=>((0,l.dD)("data-v-21753417"),e=e(),(0,l.Cn)(),e),z={style:{display:"inline-flex","align-items":"center","font-size":"2rem"}},$={style:{display:"inline-flex","align-items":"center","font-size":"2rem"}},x=k((()=>(0,l._)("div",{style:{display:"inline-flex","align-items":"center","font-size":"2rem"}}," 总专注天数 ",-1))),U={class:"today_statistic"},D=k((()=>(0,l._)("p",null,"今日数据",-1))),T=k((()=>(0,l._)("div",{style:{display:"inline-flex","align-items":"center","font-size":"2rem","padding-bottom":"1vh"}}," 今日专注时长 ",-1))),M=k((()=>(0,l._)("div",{style:{display:"inline-flex","align-items":"center","font-size":"2rem","padding-bottom":"1vh"}}," 专注次数 ",-1))),H={class:"barGraph"},j=k((()=>(0,l._)("div",{class:"divider"},null,-1))),E=k((()=>(0,l._)("p",null,"今日计划情况",-1))),A={__name:"statistic",setup(e){const t=(0,n.iH)();function a(e){let t=`${e}`.padStart(2,"0")+"秒",a=e;return a>=3600?t=`${Math.floor(a/3600)}时${Math.floor(Math.floor(a%3600)/60)}分${Math.floor(a%60)}秒`:a>=60&&(t=`${Math.floor(a/60)}分${a%60}秒`),t}return(0,l.bv)((()=>{var e;e=t.value,v=echarts.init(e,null),window.addEventListener("resize",(()=>{v.resize()}),{passive:!0}),v.setOption({lazyUpdate:!0,title:[{text:"[计划优先级分布]",textStyle:{fontSize:"1.5rem"}},{textStyle:{fontSize:"1.5rem"},text:"[专注时长分布]",top:"50%"}],color:["yellow","pink","skyblue","greenyellow"],legend:[{id:1,data:d,top:"5%",orient:"vertical",left:"3%",itemWidth:10,itemHeight:10,itemStyle:{borderWidth:0},selectedMode:!1,textStyle:{fontSize:"1.3rem"}},{id:2,orient:"vertical",type:"scroll",top:"56%",left:"0",textStyle:{fontSize:"1.5rem"},itemWidth:10,itemHeight:10,data:m}],series:[{type:"pie",radius:["25%","33%"],center:["53%","24%"],top:-10,avoidLabelOverlap:!0,showEmptyCircle:!0,labelLine:{length:"10",length2:"15",align:"center"},label:{formatter:function(e){return 0===e.data.value?"":`${e.data.value}条\n${e.data.name}`},overflow:"breakAll",alignTo:"labelLine",edgeDistance:"10%"},name:"count",data:f,legendHoverLink:!1,emphasis:{scale:!1}},{type:"pie",name:"focus",data:p,legendHoverLink:!1,avoidLabelOverlap:!0,showEmptyCircle:!0,center:["52%","73%"],radius:["25%","33%"],label:{formatter:function(e){let t=e.data.value;if(0===t)return"";let a=t+"秒";return t>=3600?a=`${Math.floor(t/3600)}时${Math.floor(Math.floor(t%3600)/60)}分${Math.floor(t%60)}秒`:t>=60&&(a=`${Math.floor(t/60)}分${t%60}秒`),a+"\n"+e.data.name}},emphasis:{scale:!1}}]})})),(0,l.Ah)((()=>{v.dispose()})),(e,s)=>{const r=(0,l.up)("el-icon"),u=(0,l.up)("el-tooltip"),d=(0,l.up)("el-statistic"),c=(0,l.up)("el-col"),f=(0,l.up)("el-row"),m=(0,l.up)("el-divider");return(0,l.wg)(),(0,l.iD)("div",{class:"wrapper",style:(0,i.j5)({borderImageSource:"url("+(0,n.SU)(o)+")"})},[(0,l.Wm)(f,{class:"total"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{span:8},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:(0,n.SU)(S)},{title:(0,l.w5)((()=>[(0,l._)("div",z,[(0,l.Uk)(" 专注总次数 "),(0,l.Wm)(u,{effect:"dark",content:"我专注了的次数",placement:"top"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{style:{"margin-left":"1vw"},size:"3.5vw"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(h.v3j))])),_:1},8,["size"])])),_:1})])])),suffix:(0,l.w5)((()=>[(0,l.Uk)("次")])),_:1},8,["value"])])),_:1}),(0,l.Wm)(c,{span:8},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:(0,n.SU)(W),formatter:a},{title:(0,l.w5)((()=>[(0,l._)("div",$,[(0,l.Uk)(" 专注总时长 "),(0,l.Wm)(u,{effect:"dark",content:"我所有专注记录的总时长",placement:"top"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{style:{"margin-left":"1vw"},size:"3.5vw"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(h.v3j))])),_:1},8,["size"])])),_:1})])])),_:1},8,["value"])])),_:1}),(0,l.Wm)(c,{span:8},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:(0,n.SU)(b)},{title:(0,l.w5)((()=>[x])),suffix:(0,l.w5)((()=>[(0,l.Uk)("天")])),_:1},8,["value"])])),_:1})])),_:1}),(0,l._)("div",U,[D,(0,l.Wm)(m,{"border-style":"dashed"}),(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{span:12},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:(0,n.SU)(_),formatter:a},{title:(0,l.w5)((()=>[T])),_:1},8,["value"])])),_:1}),(0,l.Wm)(c,{span:12},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:(0,n.SU)(w)},{title:(0,l.w5)((()=>[M])),suffix:(0,l.w5)((()=>[(0,l.Uk)("次")])),_:1},8,["value"])])),_:1})])),_:1})]),(0,l._)("div",H,[j,E,(0,l.Wm)(m,{"border-style":"dashed"}),((0,l.wg)(),(0,l.j4)(l.Ob,null,[(0,l._)("div",{class:"pie",ref_key:"pie",ref:t,style:{width:"100%",height:"56vh"}},null,512)],1024))])],4)}}},L=(0,a(3744).Z)(A,[["__scopeId","data-v-21753417"]]),O={__name:"fourthView",setup:e=>(e,t)=>((0,l.wg)(),(0,l.j4)(L))}}}]);